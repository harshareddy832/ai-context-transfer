<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Context Transfer - Settings</title>
    <link rel="stylesheet" href="options.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                <h1>AI Context Transfer Settings</h1>
            </div>
            <div class="version">v1.0.0</div>
        </header>

        <main class="main-content">
            <div class="settings-grid">
                <section class="settings-section">
                    <h2>LLM Configuration</h2>
                    <div class="setting-group">
                        <label class="setting-label">
                            <span>Preferred LLM Provider</span>
                            <select id="preferredLLM" class="setting-select">
                                <option value="ollama">Ollama (Local)</option>
                                <option value="openai">OpenAI</option>
                                <option value="anthropic">Anthropic</option>
                            </select>
                        </label>
                    </div>
                </section>

                <section class="settings-section" id="ollamaSettings">
                    <h2>Ollama Settings</h2>
                    <div class="setting-group">
                        <label class="setting-label">
                            <span>Ollama URL</span>
                            <input type="url" id="ollamaUrl" class="setting-input" placeholder="http://localhost:11434">
                        </label>
                    </div>
                    <div class="setting-group">
                        <label class="setting-label">
                            <span>Model Name</span>
                            <input type="text" id="ollamaModel" class="setting-input" placeholder="llama2">
                        </label>
                    </div>
                    <div class="setting-group">
                        <button class="test-btn" id="testOllama">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z"/>
                            </svg>
                            Test Connection
                        </button>
                        <div class="connection-status" id="ollamaStatus"></div>
                    </div>
                </section>

                <section class="settings-section" id="openaiSettings">
                    <h2>OpenAI Settings</h2>
                    <div class="setting-group">
                        <label class="setting-label">
                            <span>API Key</span>
                            <input type="password" id="openaiApiKey" class="setting-input" placeholder="sk-...">
                        </label>
                        <div class="setting-help">
                            Your API key is stored locally and never shared. 
                            <a href="https://platform.openai.com/api-keys" target="_blank">Get your API key</a>
                        </div>
                    </div>
                    <div class="setting-group">
                        <button class="test-btn" id="testOpenAI">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z"/>
                            </svg>
                            Test Connection
                        </button>
                        <div class="connection-status" id="openaiStatus"></div>
                    </div>
                </section>

                <section class="settings-section" id="anthropicSettings">
                    <h2>Anthropic Settings</h2>
                    <div class="setting-group">
                        <label class="setting-label">
                            <span>API Key</span>
                            <input type="password" id="anthropicApiKey" class="setting-input" placeholder="sk-ant-...">
                        </label>
                        <div class="setting-help">
                            Your API key is stored locally and never shared. 
                            <a href="https://console.anthropic.com/keys" target="_blank">Get your API key</a>
                        </div>
                    </div>
                    <div class="setting-group">
                        <button class="test-btn" id="testAnthropic">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8Z"/>
                            </svg>
                            Test Connection
                        </button>
                        <div class="connection-status" id="anthropicStatus"></div>
                    </div>
                </section>

                <section class="settings-section">
                    <h2>Summary Settings</h2>
                    <div class="setting-group">
                        <label class="setting-label">
                            <span>Summary Length</span>
                            <select id="summaryLength" class="setting-select">
                                <option value="short">Short (2-3 sentences)</option>
                                <option value="medium">Medium (1-2 paragraphs)</option>
                                <option value="long">Long (3-4 paragraphs)</option>
                            </select>
                        </label>
                    </div>
                    <div class="setting-group">
                        <label class="setting-checkbox">
                            <input type="checkbox" id="autoSummarize">
                            <span class="checkmark"></span>
                            <span>Auto-summarize on extraction</span>
                        </label>
                    </div>
                </section>

                <section class="settings-section">
                    <h2>General Settings</h2>
                    <div class="setting-group">
                        <label class="setting-checkbox">
                            <input type="checkbox" id="autoDetectRateLimit">
                            <span class="checkmark"></span>
                            <span>Auto-detect rate limits</span>
                        </label>
                    </div>
                    <div class="setting-group">
                        <label class="setting-checkbox">
                            <input type="checkbox" id="enableNotifications">
                            <span class="checkmark"></span>
                            <span>Enable notifications</span>
                        </label>
                    </div>
                    <div class="setting-group">
                        <label class="setting-checkbox">
                            <input type="checkbox" id="privacyMode">
                            <span class="checkmark"></span>
                            <span>Privacy mode (prefer local processing)</span>
                        </label>
                    </div>
                    <div class="setting-group">
                        <label class="setting-checkbox">
                            <input type="checkbox" id="showManualSummarizeButton">
                            <span class="checkmark"></span>
                            <span>Show manual summarize button on chat pages</span>
                        </label>
                        <div class="setting-help">
                            Displays a floating button in the bottom-right corner of ChatGPT and Claude pages for manual summarization
                        </div>
                    </div>
                    <div class="setting-group">
                        <label class="setting-label">
                            <span>Max conversation history</span>
                            <input type="number" id="maxConversationLength" class="setting-input" min="10" max="100" value="50">
                        </label>
                    </div>
                </section>

                <section class="settings-section">
                    <h2>Data Management</h2>
                    <div class="setting-group">
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">Total Transfers</span>
                                <span class="stat-value" id="totalTransfers">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Storage Used</span>
                                <span class="stat-value" id="storageUsed">0 KB</span>
                            </div>
                        </div>
                    </div>
                    <div class="setting-group">
                        <div class="data-actions">
                            <button class="secondary-btn" id="exportData">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                                </svg>
                                Export Data
                            </button>
                            <button class="secondary-btn" id="importData">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                                </svg>
                                Import Data
                            </button>
                            <button class="danger-btn" id="clearData">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"/>
                                </svg>
                                Clear All Data
                            </button>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <footer class="footer">
            <div class="footer-actions">
                <button class="primary-btn" id="saveSettings">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z"/>
                    </svg>
                    Save Settings
                </button>
                <button class="secondary-btn" id="resetSettings">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                    </svg>
                    Reset to Defaults
                </button>
            </div>
            <div class="save-status" id="saveStatus"></div>
        </footer>
    </div>

    <div class="toast" id="toast" style="display: none;">
        <div class="toast-content"></div>
    </div>

    <input type="file" id="fileInput" accept=".json" style="display: none;">

    <script src="../utils/storage.js"></script>
    <script src="../utils/api-client.js"></script>
    <script src="options.js"></script>
</body>
</html>